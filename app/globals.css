@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light mode (when not .dark) */
    --background: 248 250 252; /* slate-50 */
    --foreground: 15 23 42; /* slate-900 */
    --card: 255 255 255;
    --card-foreground: 15 23 42;
    --primary: 59 130 246; /* blue-500 */
    --primary-foreground: 255 255 255;
    --secondary: 241 245 249; /* slate-100 */
    --secondary-foreground: 30 41 59; /* slate-800 */
    --muted: 241 245 249;
    --muted-foreground: 100 116 139; /* slate-500 */
    --accent: 241 245 249;
    --accent-foreground: 15 23 42;
    --destructive: 239 68 68; /* red-500 */
    --destructive-foreground: 255 255 255;
    --border: 226 232 240; /* slate-200 */
    --input: 226 232 240;
    --ring: 59 130 246;
    --radius: 0.5rem;
  }

  .dark {
    /* Dark mode - primary palette */
    --background: 2 6 23; /* slate-950 */
    --foreground: 241 245 249; /* slate-100 */
    --card: 30 41 59; /* slate-800 */
    --card-foreground: 241 245 249;
    --primary: 59 130 246; /* blue-500 */
    --primary-foreground: 255 255 255;
    --secondary: 51 65 85; /* slate-700 */
    --secondary-foreground: 241 245 249;
    --muted: 51 65 85;
    --muted-foreground: 148 163 184; /* slate-400 */
    --accent: 51 65 85;
    --accent-foreground: 241 245 249;
    --destructive: 239 68 68;
    --destructive-foreground: 255 255 255;
    --border: 51 65 85; /* slate-700 */
    --input: 51 65 85;
    --ring: 59 130 246;

    /* Glass surfaces */
    --glass-bg: rgb(255 255 255 / 0.03);
    --glass-border: rgb(255 255 255 / 0.06);
    --glass-1: rgb(255 255 255 / 0.03);
    --glass-2: rgb(255 255 255 / 0.06);
    --glass-3: rgb(255 255 255 / 0.10);

    /* Glow accents */
    --glow-primary: rgb(59 130 246 / 0.5);
    --glow-success: rgb(16 185 129 / 0.5);
    --glow-danger: rgb(239 68 68 / 0.5);
    --glow-purple: rgb(139 92 246 / 0.5);

    /* Shadow tokens */
    --shadow-glass: 0 4px 24px -1px rgb(0 0 0 / 0.3), 0 2px 8px -2px rgb(0 0 0 / 0.2);
    --shadow-glass-lg: 0 8px 40px -4px rgb(0 0 0 / 0.4), 0 4px 16px -4px rgb(0 0 0 / 0.3);
    --shadow-glow-blue: 0 0 20px -4px rgb(59 130 246 / 0.3);
    --shadow-glow-purple: 0 0 20px -4px rgb(139 92 246 / 0.3);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    color-scheme: dark;
  }

  html.dark {
    color-scheme: dark;
  }

  html:not(.dark) {
    color-scheme: light;
  }

  body {
    @apply bg-background text-foreground antialiased;
  }
}

@layer utilities {
  /* Glass tiers */
  .glass-1 {
    background: var(--glass-1);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  .glass-2 {
    background: var(--glass-2);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border: 1px solid var(--glass-border);
    box-shadow: var(--shadow-glass);
  }

  .glass-3 {
    background: var(--glass-3);
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    border: 1px solid var(--glass-border);
    box-shadow: var(--shadow-glass-lg);
  }

  /* Backward compat: .glass is alias for glass-2 */
  .glass {
    background: var(--glass-2);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border: 1px solid var(--glass-border);
    box-shadow: var(--shadow-glass);
  }

  .dark .glass {
    background: var(--glass-2);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border: 1px solid var(--glass-border);
    box-shadow: var(--shadow-glass);
  }

  /* Glass inner highlight */
  .glass-inner-light {
    box-shadow: inset 0 1px 0 0 rgb(255 255 255 / 0.06);
  }

  /* Gradient shimmer border */
  .glass-gradient-border {
    position: relative;
  }

  .glass-gradient-border::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(
      135deg,
      rgb(255 255 255 / 0.1),
      rgb(255 255 255 / 0.02) 40%,
      rgb(255 255 255 / 0.02) 60%,
      rgb(255 255 255 / 0.1)
    );
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  /* Glow shadows */
  .glow-blue {
    box-shadow: var(--shadow-glow-blue);
  }

  .glow-purple {
    box-shadow: var(--shadow-glow-purple);
  }

  /* Typography utilities */
  .heading-xl {
    @apply text-3xl sm:text-4xl font-bold tracking-tight text-white;
  }

  .heading-lg {
    @apply text-xl sm:text-2xl font-semibold tracking-tight text-white;
  }

  .heading-md {
    @apply text-lg font-semibold text-white;
  }

  .stat-value {
    font-family: var(--font-mono), ui-monospace, monospace;
    font-variant-numeric: tabular-nums;
  }

  .text-label {
    @apply text-xs uppercase tracking-wider text-slate-400;
  }

  /* Ambient background */
  .ambient-bg {
    background-color: #020617;
    background-image:
      radial-gradient(ellipse 80% 60% at 20% 0%, rgb(59 130 246 / 0.08), transparent),
      radial-gradient(ellipse 60% 50% at 80% 100%, rgb(139 92 246 / 0.06), transparent);
  }

  /* Custom scrollbar for dark mode */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 9999px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgb(255 255 255 / 0.1);
    border-radius: 9999px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgb(255 255 255 / 0.15);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: rgb(255 255 255 / 0.1);
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgb(255 255 255 / 0.15);
  }

  /* Status dot animations */
  @keyframes pulse-slow {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  .animate-pulse-slow {
    animation: pulse-slow 2s ease-in-out infinite;
  }

  /* Toast slide-in animation */
  @keyframes slide-in {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  /* Toast slide-out animation */
  @keyframes slide-out {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(100%);
      opacity: 0;
    }
  }

  .animate-slide-out {
    animation: slide-out 0.15s ease-in forwards;
  }

  .animate-slide-in {
    animation: slide-in 0.2s ease-out;
  }

  /* Gradient backgrounds */
  .gradient-dark {
    @apply bg-gradient-to-br from-slate-900 via-slate-950 to-slate-900;
  }

  /* Card hover effects */
  .card-hover {
    @apply transition-all duration-200 hover:scale-[1.02] hover:shadow-lg;
  }

  /* Status colors as utilities */
  .status-running {
    @apply text-blue-400 bg-blue-500/10;
  }

  .status-completed {
    @apply text-emerald-400 bg-emerald-500/10;
  }

  .status-failed {
    @apply text-red-400 bg-red-500/10;
  }

  .status-pending {
    @apply text-yellow-400 bg-yellow-500/10;
  }

  .status-paused {
    @apply text-orange-400 bg-orange-500/10;
  }

  /* Landing page animations */
  @keyframes fade-in-up {
    0% { opacity: 0; transform: translateY(24px); }
    100% { opacity: 1; transform: translateY(0); }
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.6s ease-out forwards;
    opacity: 0;
  }

  .animate-delay-100 { animation-delay: 100ms; }
  .animate-delay-200 { animation-delay: 200ms; }
  .animate-delay-300 { animation-delay: 300ms; }
  .animate-delay-400 { animation-delay: 400ms; }
  .animate-delay-500 { animation-delay: 500ms; }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-12px); }
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  .landing-grid-bg {
    background-image:
      linear-gradient(rgb(255 255 255 / 0.02) 1px, transparent 1px),
      linear-gradient(90deg, rgb(255 255 255 / 0.02) 1px, transparent 1px);
    background-size: 64px 64px;
  }

  /* Sidebar active nav indicator */
  .nav-active-indicator {
    box-shadow: inset 3px 0 0 0 rgb(59 130 246);
    background: linear-gradient(to right, rgb(59 130 246 / 0.15), transparent);
  }
}

/* Line clamp utilities */
.line-clamp-1 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
}

.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
}

.line-clamp-3 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
}

/* Chat collapse fix - expand content when chat sidebar is closed */
[data-chat-open="false"] .max-w-\[1600px\] {
  max-width: 100% !important;
}

/* Safe area insets for notched phones */
@supports (padding-top: env(safe-area-inset-top)) {
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }
}

/* Mobile navigation animations */
@keyframes slide-up {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slide-from-left {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(0);
  }
}

.animate-slide-up {
  animation: slide-up 0.2s ease-out;
}

.animate-slide-from-left {
  animation: slide-from-left 0.2s ease-out;
}

/* Hide scrollbar for horizontal scrollers */
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;  /* Chrome, Safari and Opera */
}
